# Documentation

This documentation site is built using [Vocs](https://vocs.dev), a modern documentation framework powered by [Vite](https://vitejs.dev/).

## Running the docs locally

1. ensure you have `.env.local` and created variables according to `.env.example` in the `docs` folder.
2. install dependencies

```bash
pnpm install
```

3. run the docs

```bash
pnpm run dev
```

## Generating references

### SDK

The SDK reference is generated using TypeDoc from the SDK package source files.

```bash
npm run ref:gen:sdk
```

### Protocol

The protocol reference is generated using solidity-docgen from the protocol package source files.

```bash
npm run ref:gen:protocol
```

### Indexer

The indexer reference is generated using TypeDoc from the indexer package source files.

```bash
npm run ref:gen:indexer
```

## Folder Structure

```
docs/
├── pages/           # Documentation pages
│   ├── index.mdx    # Home page
│   └── sdk-reference/   # API Reference docs
│       ├── index/       # Generated from src/index.ts
│       │   └── index.mdx
│       ├── types/       # Generated from src/types.ts
│       │   └── index.mdx
│       └── react/       # React components documentation
│           └── index.mdx
└── public/          # Static assets
```

## Known Limitations

Currently, there are some known limitations due to external libs issues:

1. **MDX File Processing**: There's a [known issue](https://github.com/wevm/vocs/issues/238) affect index mdx file generated by typedoc from index module, hence in this project we use `@module defaultExports` to rename the generated file to workaround this issue.

2. Protocol reference generated by solidity-docgen doesn't support printing `@notice` and `@param` on `enum` and `struct`, this is due to:
   - https://github.com/ethereum/solidity/issues/12295
   - https://github.com/OpenZeppelin/solidity-docgen/issues/432

## Available Scripts

This package includes several npm scripts to help manage the documentation:

- `dev`: Starts the development server for local documentation preview on port 3002
- `build`: Builds the documentation site for production using Vocs
- `preview`: Serves the built documentation site locally
- `ref:gen:sdk`: Generates SDK reference documentation using TypeDoc from the SDK package source files
- `ref:gen:protocol`: Generates Solidity protocol reference documentation using solidity-docgen

## Known issues in the doc

1. Return type shows as `object` instead of type alias name, e.g `createCommentData()`: This is ultimately due to typescript limitations, there are workarounds require change `type` into `interface`, however it feels overkill for a trivial issue in document. [TypeStrong/typedoc#2712](https://github.com/TypeStrong/typedoc/issues/2712).

## Contributing

When contributing to the documentation:

1. Always preview your changes locally using `docs:dev` before committing
2. Follow the existing documentation structure
3. Use relative links when referencing other documentation pages
