[**@ecp.eth/sdk**](../../index.mdx)

***

[@ecp.eth/sdk](/sdk-reference/index.mdx) / [indexer](/sdk-reference/indexer/index.mdx) / fetchComments

# Function: fetchComments()

```ts
function fetchComments(options): Promise<{
  extra: {
     moderationEnabled: boolean;
     moderationKnownReactions: string[];
  };
  pagination: {
     endCursor?: `0x${string}`;
     hasNext: boolean;
     hasPrevious: boolean;
     limit: number;
     startCursor?: `0x${string}`;
  };
  results: {
     app: `0x${string}`;
     author: {
        address: `0x${string}`;
        ens?: {
           avatarUrl: string | null;
           name: string;
        };
        farcaster?: {
           displayName?: string;
           fid: number;
           pfpUrl?: string;
           username: string;
        };
     };
     chainId: number;
     channelId: bigint;
     commentType: number;
     content: string;
     createdAt: Date;
     cursor: `0x${string}`;
     deletedAt: Date | null;
     hookMetadata: {
        key: `0x${string}`;
        value: `0x${string}`;
     }[];
     id: `0x${string}`;
     logIndex: number | null;
     metadata: {
        key: `0x${string}`;
        value: `0x${string}`;
     }[];
     moderationClassifierResult: Record<string, number>;
     moderationClassifierScore: number;
     moderationStatus: "approved" | "pending" | "rejected";
     moderationStatusChangedAt: Date;
     parentId: `0x${string}` | null;
     path: string;
     reactionCounts: Record<string, number>;
     references: (
        | {
        address: `0x${string}`;
        avatarUrl: string | null;
        name: string;
        position: {
           end: number;
           start: number;
        };
        type: "ens";
        url: string;
      }
        | {
        address: `0x${string}`;
        displayName: string | null;
        fid: number;
        fname: string;
        pfpUrl: string | null;
        position: {
           end: number;
           start: number;
        };
        type: "farcaster";
        url: string;
        username: string;
      }
        | {
        address: `0x${string}`;
        chainId: number | null;
        chains: {
           caip: string;
           chainId: number;
        }[];
        decimals: number;
        logoURI: string | null;
        name: string;
        position: {
           end: number;
           start: number;
        };
        symbol: string;
        type: "erc20";
      }
        | {
        description: string | null;
        favicon: string | null;
        mediaType: string;
        opengraph:   | {
           description: string | null;
           image: string;
           title: string;
           url: string;
         }
           | null;
        position: {
           end: number;
           start: number;
        };
        title: string;
        type: "webpage";
        url: string;
      }
        | {
        mediaType: string;
        position: {
           end: number;
           start: number;
        };
        type: "file";
        url: string;
      }
        | {
        dimension?: {
           height: number;
           width: number;
        };
        mediaType: string;
        position: {
           end: number;
           start: number;
        };
        type: "image";
        url: string;
      }
        | {
        mediaType: string;
        position: {
           end: number;
           start: number;
        };
        type: "video";
        url: string;
        videoTracks?: {
           codec?: ... | ...;
           dimension: {
              height: ...;
              width: ...;
           };
        }[];
      }
        | {
        chainId: number;
        id: `0x${string}`;
        position: {
           end: number;
           start: number;
        };
        type: "quoted_comment";
     })[];
     replies: {
        extra: {
           moderationEnabled: boolean;
           moderationKnownReactions: string[];
        };
        pagination: {
           count: number;
           endCursor?: `0x${string}`;
           hasNext: boolean;
           hasPrevious: boolean;
           limit: number;
           startCursor?: `0x${string}`;
        };
        results: IndexerAPICommentSchemaType[];
     };
     revision: number;
     targetUri: string;
     txHash: `0x${string}`;
     updatedAt: Date;
     viewerReactions: Record<string, IndexerAPICommentSchemaType[]>;
     zeroExSwap:   | {
        from: {
           address: `0x${string}`;
           amount: string;
           symbol: string;
        };
        to: {
           address: "" | `0x${string}`;
           amount: string;
           symbol: string;
        };
      }
        | null;
  }[];
}>;
```

Defined in: [packages/sdk/src/indexer/api.ts:314](https://github.com/ecp-eth/comments-monorepo/blob/main/packages/sdk/src/indexer/api.ts#L314)

Fetch comments from the Indexer API

## Parameters

### options

[`FetchCommentsOptions`](/sdk-reference/indexer/type-aliases/FetchCommentsOptions.mdx)

## Returns

`Promise`\<\{
  `extra`: \{
     `moderationEnabled`: `boolean`;
     `moderationKnownReactions`: `string`[];
  \};
  `pagination`: \{
     `endCursor?`: `` `0x${string}` ``;
     `hasNext`: `boolean`;
     `hasPrevious`: `boolean`;
     `limit`: `number`;
     `startCursor?`: `` `0x${string}` ``;
  \};
  `results`: \{
     `app`: `` `0x${string}` ``;
     `author`: \{
        `address`: `` `0x${string}` ``;
        `ens?`: \{
           `avatarUrl`: `string` \| `null`;
           `name`: `string`;
        \};
        `farcaster?`: \{
           `displayName?`: `string`;
           `fid`: `number`;
           `pfpUrl?`: `string`;
           `username`: `string`;
        \};
     \};
     `chainId`: `number`;
     `channelId`: `bigint`;
     `commentType`: `number`;
     `content`: `string`;
     `createdAt`: `Date`;
     `cursor`: `` `0x${string}` ``;
     `deletedAt`: `Date` \| `null`;
     `hookMetadata`: \{
        `key`: `` `0x${string}` ``;
        `value`: `` `0x${string}` ``;
     \}[];
     `id`: `` `0x${string}` ``;
     `logIndex`: `number` \| `null`;
     `metadata`: \{
        `key`: `` `0x${string}` ``;
        `value`: `` `0x${string}` ``;
     \}[];
     `moderationClassifierResult`: `Record`\<`string`, `number`\>;
     `moderationClassifierScore`: `number`;
     `moderationStatus`: `"approved"` \| `"pending"` \| `"rejected"`;
     `moderationStatusChangedAt`: `Date`;
     `parentId`: `` `0x${string}` `` \| `null`;
     `path`: `string`;
     `reactionCounts`: `Record`\<`string`, `number`\>;
     `references`: (
        \| \{
        `address`: `` `0x${string}` ``;
        `avatarUrl`: `string` \| `null`;
        `name`: `string`;
        `position`: \{
           `end`: `number`;
           `start`: `number`;
        \};
        `type`: `"ens"`;
        `url`: `string`;
      \}
        \| \{
        `address`: `` `0x${string}` ``;
        `displayName`: `string` \| `null`;
        `fid`: `number`;
        `fname`: `string`;
        `pfpUrl`: `string` \| `null`;
        `position`: \{
           `end`: `number`;
           `start`: `number`;
        \};
        `type`: `"farcaster"`;
        `url`: `string`;
        `username`: `string`;
      \}
        \| \{
        `address`: `` `0x${string}` ``;
        `chainId`: `number` \| `null`;
        `chains`: \{
           `caip`: `string`;
           `chainId`: `number`;
        \}[];
        `decimals`: `number`;
        `logoURI`: `string` \| `null`;
        `name`: `string`;
        `position`: \{
           `end`: `number`;
           `start`: `number`;
        \};
        `symbol`: `string`;
        `type`: `"erc20"`;
      \}
        \| \{
        `description`: `string` \| `null`;
        `favicon`: `string` \| `null`;
        `mediaType`: `string`;
        `opengraph`:   \| \{
           `description`: `string` \| `null`;
           `image`: `string`;
           `title`: `string`;
           `url`: `string`;
         \}
           \| `null`;
        `position`: \{
           `end`: `number`;
           `start`: `number`;
        \};
        `title`: `string`;
        `type`: `"webpage"`;
        `url`: `string`;
      \}
        \| \{
        `mediaType`: `string`;
        `position`: \{
           `end`: `number`;
           `start`: `number`;
        \};
        `type`: `"file"`;
        `url`: `string`;
      \}
        \| \{
        `dimension?`: \{
           `height`: `number`;
           `width`: `number`;
        \};
        `mediaType`: `string`;
        `position`: \{
           `end`: `number`;
           `start`: `number`;
        \};
        `type`: `"image"`;
        `url`: `string`;
      \}
        \| \{
        `mediaType`: `string`;
        `position`: \{
           `end`: `number`;
           `start`: `number`;
        \};
        `type`: `"video"`;
        `url`: `string`;
        `videoTracks?`: \{
           `codec?`: ... \| ...;
           `dimension`: \{
              `height`: ...;
              `width`: ...;
           \};
        \}[];
      \}
        \| \{
        `chainId`: `number`;
        `id`: `` `0x${string}` ``;
        `position`: \{
           `end`: `number`;
           `start`: `number`;
        \};
        `type`: `"quoted_comment"`;
     \})[];
     `replies`: \{
        `extra`: \{
           `moderationEnabled`: `boolean`;
           `moderationKnownReactions`: `string`[];
        \};
        `pagination`: \{
           `count`: `number`;
           `endCursor?`: `` `0x${string}` ``;
           `hasNext`: `boolean`;
           `hasPrevious`: `boolean`;
           `limit`: `number`;
           `startCursor?`: `` `0x${string}` ``;
        \};
        `results`: [`IndexerAPICommentSchemaType`](/sdk-reference/indexer/type-aliases/IndexerAPICommentSchemaType.mdx)[];
     \};
     `revision`: `number`;
     `targetUri`: `string`;
     `txHash`: `` `0x${string}` ``;
     `updatedAt`: `Date`;
     `viewerReactions`: `Record`\<`string`, [`IndexerAPICommentSchemaType`](/sdk-reference/indexer/type-aliases/IndexerAPICommentSchemaType.mdx)[]\>;
     `zeroExSwap`:   \| \{
        `from`: \{
           `address`: `` `0x${string}` ``;
           `amount`: `string`;
           `symbol`: `string`;
        \};
        `to`: \{
           `address`: `""` \| `` `0x${string}` ``;
           `amount`: `string`;
           `symbol`: `string`;
        \};
      \}
        \| `null`;
  \}[];
\}\>

A promise that resolves comments fetched from the Indexer API

## Throws

If there is some request failure.
