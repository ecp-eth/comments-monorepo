import { defineConfig } from "vitest/config";
import tsconfigPaths from "vite-tsconfig-paths";

process.env.DATABASE_URL ??=
  "postgresql://postgres:postgres@localhost:5432/postgres";
process.env.SKIP_DRIZZLE_SCHEMA_DETECTION ??= "1";
process.env.NEYNAR_API_KEY ??= "test";
process.env.ENS_RPC_URL ??= "https://ethereum-rpc.publicnode.com";
process.env.SIM_API_KEY ??= "test";
// Test-only fallback PEM keys (do not use in production)
process.env.JWT_SIWE_NONCE_PRIVATE_KEY ??=
  "MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQD62JBRCIpbH6oz0qPNGLJXeKu8Tsi2jDjro5yuA2YXnSSpku/3nz6D8230iH958tRt7HvbbIMwQbj69VWbE7o2WEbMN12V+XqG84W9LgVl7DmIrgOe99zpOXDOiNnCY7q8Uf7zzJdF/F870TWdjVnJjIoUv3OXLw+80p5btNvwp1Tcge0xrxDDwABk2fAuo+UJRiTEUrkucqVI9viIKPhLj5fFVQnb9UONnXF2Hbu9mO0xy8JXZtYtzlYZ0V1Tvn2pbI1KS43VGzTYSi5UtJ8B0TnppdKM4JIbIUrMW2qeFD8KF41RGWB7B+1XR2zT54Yscdv8B+8xF6omnscGK5JfAgMBAAECggEAAxCI7X8t4YseKIqW7GHe2+liKmd0AExE7cFj9U7z/QSIdsyQGKBeF9KY3KHw8hZ2De8TsaHpFbqCfgkSm1W/B/xFcSfurBm41ik80GDdjq83d2SuL/pV5+uHEJ7kuivpvh8/qXmDEkcmYAlgSaUjxwNBNJuvgoCqr+M1gr1PlT26lIy+H671eKwHDSQ+5VhrJSkXkkgzKMN/dHI5b/ZNYcV+FftGkQNUbPCbeRz13VpWTqmna6FNjy2G+RFtQTynktRhurGI+VFbldEVGgoEhVVYAtHZt3NbIV1XLbJAVbJFVE70zgM4yqcU/0/1WkgS/6kcVaSScsjIWs7FGB5+oQKBgQD93hiWXXsr66+zi2V2xEa8uMAz0Sft31WFNieQeW01TmnpAUXHwOqjb+gHDSkdkfoJdfumvh6tQGY5AVEu0k6lyyEQk+XvTzAPA9rdwtq+l3bv9OiyWsJE3qQO8Q6V5uQykgAcnPRMeEwkASudYv3n01Gf5In1I6VKzmcKjowcRwKBgQD88/hdTO3SoXFf329YuGKK7VR33UkHHGLB4GUUOkzq001gEP/y7r0AzXHtKe+dpNd8CI+1TL2nme22zcS27RwG7XF2nQ2xOKZvoeqmwJnAOSgxmp5Chi9hrpcQrksdoa2yHnmP8OK+JihlBu95dmy57hY3zQYncoPp0EqGd8EdKQKBgCJ4vPf1+5qsJzCHFiD5Z+2KXLbsiLJ5KACtqNOqWVTqr+Duxk3oeTP2JxiGBfY48y3Dsociu8Gkw/yrnB1yezFyEqxQmOFU7F6tlFOWeON2Z7UPmWVWg5icbsSEoQljz8q6Hn/EJDwZ/aTJ7+UwIvAOtr+yZbU+wNwWiNFbJ9VTAoGAe5Jz8qByTkOwLzXoH190RIpMiYIA+whS9oO43XjdupofYp7rarJWgt3amhGyjUDKRD2qdtdWj1oTVwqO3w5WcsvschWnarxSEpb3Gx9b/RvvFsyCI92JqB6yjeOXrpIdWLaqjDcRjfL2KOSKeLvxwaMeF4SBTSQUbVTkE2zNWoECgYEApugdk6UrzpLD78iagRJP65bM50dOdbAeBuNmZDdx6jSh6/MLVQ4OQM3PrVMGEacuOAzyrBH0FKhJU/eTIZWfKD/tjl3EqzzuSLf8LJQQkLO/hbSGL9sUH3eVIuDx95M5483wXMwnt1qMAfrvII294xMGEPnN63OCl6RHQ3GuiVQ=";
process.env.JWT_SIWE_NONCE_PUBLIC_KEY ??=
  "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA+tiQUQiKWx+qM9KjzRiyV3irvE7Itow466OcrgNmF50kqZLv958+g/Nt9Ih/efLUbex722yDMEG4+vVVmxO6NlhGzDddlfl6hvOFvS4FZew5iK4Dnvfc6TlwzojZwmO6vFH+88yXRfxfO9E1nY1ZyYyKFL9zly8PvNKeW7Tb8KdU3IHtMa8Qw8AAZNnwLqPlCUYkxFK5LnKlSPb4iCj4S4+XxVUJ2/VDjZ1xdh27vZjtMcvCV2bWLc5WGdFdU759qWyNSkuN1Rs02EouVLSfAdE56aXSjOCSGyFKzFtqnhQ/CheNURlgewftV0ds0+eGLHHb/AfvMReqJp7HBiuSXwIDAQABMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA+tiQUQiKWx+qM9KjzRiyV3irvE7Itow466OcrgNmF50kqZLv958+g/Nt9Ih/efLUbex722yDMEG4+vVVmxO6NlhGzDddlfl6hvOFvS4FZew5iK4Dnvfc6TlwzojZwmO6vFH+88yXRfxfO9E1nY1ZyYyKFL9zly8PvNKeW7Tb8KdU3IHtMa8Qw8AAZNnwLqPlCUYkxFK5LnKlSPb4iCj4S4+XxVUJ2/VDjZ1xdh27vZjtMcvCV2bWLc5WGdFdU759qWyNSkuN1Rs02EouVLSfAdE56aXSjOCSGyFKzFtqnhQ/CheNURlgewftV0ds0+eGLHHb/AfvMReqJp7HBiuSXwIDAQAB";

process.env.JWT_ACCESS_TOKEN_PRIVATE_KEY ??=
  process.env.JWT_SIWE_NONCE_PRIVATE_KEY;
process.env.JWT_ACCESS_TOKEN_PUBLIC_KEY ??=
  process.env.JWT_SIWE_NONCE_PUBLIC_KEY;

process.env.JWT_REFRESH_TOKEN_PRIVATE_KEY ??=
  process.env.JWT_SIWE_NONCE_PRIVATE_KEY;
process.env.JWT_REFRESH_TOKEN_PUBLIC_KEY ??=
  process.env.JWT_SIWE_NONCE_PUBLIC_KEY;
process.env.PINATA_JWT ??= "test";
process.env.PINATA_GATEWAY ??= "gateway.pinata.cloud";

export default defineConfig({
  plugins: [
    tsconfigPaths({
      skip: (dir) => dir.includes("demo-rn-expo"),
    }),
  ],
});
