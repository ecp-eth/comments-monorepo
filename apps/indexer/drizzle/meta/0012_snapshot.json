{
  "id": "fa057bc0-11f0-458c-a58c-923adb0c4273",
  "prevId": "ae062826-5b18-4b15-aa7b-4477abb72177",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "ecp_indexer_schema.api_keys": {
      "name": "api_keys",
      "schema": "ecp_indexer_schema",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "public_key": {
          "name": "public_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "last_used_at": {
          "name": "last_used_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "api_keys_by_public_key_idx": {
          "name": "api_keys_by_public_key_idx",
          "columns": [
            {
              "expression": "id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "api_keys_name_unique": {
          "name": "api_keys_name_unique",
          "nullsNotDistinct": false,
          "columns": ["name"]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "ecp_indexer_schema.app": {
      "name": "app",
      "schema": "ecp_indexer_schema",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "owner_id": {
          "name": "owner_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "app_by_owner_id_idx": {
          "name": "app_by_owner_id_idx",
          "columns": [
            {
              "expression": "owner_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "app_owner_id_user_id_fk": {
          "name": "app_owner_id_user_id_fk",
          "tableFrom": "app",
          "tableTo": "user",
          "schemaTo": "ecp_indexer_schema",
          "columnsFrom": ["owner_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "ecp_indexer_schema.app_signing_keys": {
      "name": "app_signing_keys",
      "schema": "ecp_indexer_schema",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "revoked_at": {
          "name": "revoked_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "app_id": {
          "name": "app_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "secret": {
          "name": "secret",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "app_signing_keys_app_id_app_id_fk": {
          "name": "app_signing_keys_app_id_app_id_fk",
          "tableFrom": "app_signing_keys",
          "tableTo": "app",
          "schemaTo": "ecp_indexer_schema",
          "columnsFrom": ["app_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "ask_one_active_secret_uq": {
          "name": "ask_one_active_secret_uq",
          "nullsNotDistinct": true,
          "columns": ["app_id", "revoked_at"]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "ecp_indexer_schema.app_webhook": {
      "name": "app_webhook",
      "schema": "ecp_indexer_schema",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "app_id": {
          "name": "app_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "owner_id": {
          "name": "owner_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "url": {
          "name": "url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "auth": {
          "name": "auth",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{\"type\":\"no-auth\"}'::jsonb"
        },
        "event_filter": {
          "name": "event_filter",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'"
        },
        "paused": {
          "name": "paused",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "paused_at": {
          "name": "paused_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "event_activations": {
          "name": "event_activations",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "event_outbox_position": {
          "name": "event_outbox_position",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        }
      },
      "indexes": {
        "aw_subscriptions_by_event_idx": {
          "name": "aw_subscriptions_by_event_idx",
          "columns": [
            {
              "expression": "event_filter",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "\"ecp_indexer_schema\".\"app_webhook\".\"paused\" = FALSE",
          "concurrently": false,
          "method": "gin",
          "with": {}
        },
        "aw_by_paused_status_idx": {
          "name": "aw_by_paused_status_idx",
          "columns": [
            {
              "expression": "paused",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "aw_by_id_and_app_id_idx": {
          "name": "aw_by_id_and_app_id_idx",
          "columns": [
            {
              "expression": "id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "app_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "aw_by_created_at_idx": {
          "name": "aw_by_created_at_idx",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "aw_by_outbox_position_idx": {
          "name": "aw_by_outbox_position_idx",
          "columns": [
            {
              "expression": "event_outbox_position",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "app_webhook_app_id_app_id_fk": {
          "name": "app_webhook_app_id_app_id_fk",
          "tableFrom": "app_webhook",
          "tableTo": "app",
          "schemaTo": "ecp_indexer_schema",
          "columnsFrom": ["app_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "app_webhook_owner_id_user_id_fk": {
          "name": "app_webhook_owner_id_user_id_fk",
          "tableFrom": "app_webhook",
          "tableTo": "user",
          "schemaTo": "ecp_indexer_schema",
          "columnsFrom": ["owner_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "ecp_indexer_schema.app_webhook_delivery": {
      "name": "app_webhook_delivery",
      "schema": "ecp_indexer_schema",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigserial",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "next_attempt_at": {
          "name": "next_attempt_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "lease_until": {
          "name": "lease_until",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "owner_id": {
          "name": "owner_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "app_id": {
          "name": "app_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "app_webhook_id": {
          "name": "app_webhook_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "event_id": {
          "name": "event_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "attempts_count": {
          "name": "attempts_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "last_error": {
          "name": "last_error",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "aws_by_status_and_next_attempt_at_idx": {
          "name": "aws_by_status_and_next_attempt_at_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "next_attempt_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "awd_by_webhook_idx": {
          "name": "awd_by_webhook_idx",
          "columns": [
            {
              "expression": "app_webhook_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "awd_by_owner_app_idx": {
          "name": "awd_by_owner_app_idx",
          "columns": [
            {
              "expression": "owner_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "app_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "awd_by_owner_webhook_idx": {
          "name": "awd_by_owner_webhook_idx",
          "columns": [
            {
              "expression": "owner_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "app_webhook_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "awd_by_owner_app_webhook_idx": {
          "name": "awd_by_owner_app_webhook_idx",
          "columns": [
            {
              "expression": "owner_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "app_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "app_webhook_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "awd_by_webhook_created_at_range_idx": {
          "name": "awd_by_webhook_created_at_range_idx",
          "columns": [
            {
              "expression": "app_webhook_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "awd_by_webhook_status_created_at_range_idx": {
          "name": "awd_by_webhook_status_created_at_range_idx",
          "columns": [
            {
              "expression": "app_webhook_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "aws_heads_per_subscription_idx": {
          "name": "aws_heads_per_subscription_idx",
          "columns": [
            {
              "expression": "app_webhook_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "next_attempt_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "\"ecp_indexer_schema\".\"app_webhook_delivery\".\"status\" IN ('pending', 'processing')",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "aws_inflight_idx": {
          "name": "aws_inflight_idx",
          "columns": [
            {
              "expression": "app_webhook_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "lease_until",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "\"ecp_indexer_schema\".\"app_webhook_delivery\".\"status\" = 'processing'",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "app_webhook_delivery_owner_id_user_id_fk": {
          "name": "app_webhook_delivery_owner_id_user_id_fk",
          "tableFrom": "app_webhook_delivery",
          "tableTo": "user",
          "schemaTo": "ecp_indexer_schema",
          "columnsFrom": ["owner_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "app_webhook_delivery_app_id_app_id_fk": {
          "name": "app_webhook_delivery_app_id_app_id_fk",
          "tableFrom": "app_webhook_delivery",
          "tableTo": "app",
          "schemaTo": "ecp_indexer_schema",
          "columnsFrom": ["app_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "app_webhook_delivery_app_webhook_id_app_webhook_id_fk": {
          "name": "app_webhook_delivery_app_webhook_id_app_webhook_id_fk",
          "tableFrom": "app_webhook_delivery",
          "tableTo": "app_webhook",
          "schemaTo": "ecp_indexer_schema",
          "columnsFrom": ["app_webhook_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "app_webhook_delivery_event_id_event_outbox_id_fk": {
          "name": "app_webhook_delivery_event_id_event_outbox_id_fk",
          "tableFrom": "app_webhook_delivery",
          "tableTo": "event_outbox",
          "schemaTo": "ecp_indexer_schema",
          "columnsFrom": ["event_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "awd_dedupe_deliveries_uq": {
          "name": "awd_dedupe_deliveries_uq",
          "nullsNotDistinct": false,
          "columns": ["app_webhook_id", "event_id"]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "ecp_indexer_schema.app_webhook_delivery_attempt": {
      "name": "app_webhook_delivery_attempt",
      "schema": "ecp_indexer_schema",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigserial",
          "primaryKey": true,
          "notNull": true
        },
        "attempted_at": {
          "name": "attempted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "attempt_number": {
          "name": "attempt_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "owner_id": {
          "name": "owner_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "app_id": {
          "name": "app_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "app_webhook_id": {
          "name": "app_webhook_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "app_webhook_delivery_id": {
          "name": "app_webhook_delivery_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "event_id": {
          "name": "event_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "response_status": {
          "name": "response_status",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "response_ms": {
          "name": "response_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "error": {
          "name": "error",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "awda_by_owner_idx": {
          "name": "awda_by_owner_idx",
          "columns": [
            {
              "expression": "owner_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "attempted_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "awda_by_owner_app_idx": {
          "name": "awda_by_owner_app_idx",
          "columns": [
            {
              "expression": "owner_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "app_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "attempted_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "awda_by_owner_webhook_idx": {
          "name": "awda_by_owner_webhook_idx",
          "columns": [
            {
              "expression": "owner_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "app_webhook_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "attempted_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "awda_by_owner_app_webhook_idx": {
          "name": "awda_by_owner_app_webhook_idx",
          "columns": [
            {
              "expression": "owner_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "app_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "app_webhook_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "attempted_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "awda_by_webhook_idx": {
          "name": "awda_by_webhook_idx",
          "columns": [
            {
              "expression": "app_webhook_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "attempted_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "awda_failed_partial_idx": {
          "name": "awda_failed_partial_idx",
          "columns": [
            {
              "expression": "response_status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "\"ecp_indexer_schema\".\"app_webhook_delivery_attempt\".\"response_status\" < 200 OR \"ecp_indexer_schema\".\"app_webhook_delivery_attempt\".\"response_status\" > 399",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "app_webhook_delivery_attempt_owner_id_user_id_fk": {
          "name": "app_webhook_delivery_attempt_owner_id_user_id_fk",
          "tableFrom": "app_webhook_delivery_attempt",
          "tableTo": "user",
          "schemaTo": "ecp_indexer_schema",
          "columnsFrom": ["owner_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "app_webhook_delivery_attempt_app_id_app_id_fk": {
          "name": "app_webhook_delivery_attempt_app_id_app_id_fk",
          "tableFrom": "app_webhook_delivery_attempt",
          "tableTo": "app",
          "schemaTo": "ecp_indexer_schema",
          "columnsFrom": ["app_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "app_webhook_delivery_attempt_app_webhook_id_app_webhook_id_fk": {
          "name": "app_webhook_delivery_attempt_app_webhook_id_app_webhook_id_fk",
          "tableFrom": "app_webhook_delivery_attempt",
          "tableTo": "app_webhook",
          "schemaTo": "ecp_indexer_schema",
          "columnsFrom": ["app_webhook_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "app_webhook_delivery_attempt_app_webhook_delivery_id_app_webhook_delivery_id_fk": {
          "name": "app_webhook_delivery_attempt_app_webhook_delivery_id_app_webhook_delivery_id_fk",
          "tableFrom": "app_webhook_delivery_attempt",
          "tableTo": "app_webhook_delivery",
          "schemaTo": "ecp_indexer_schema",
          "columnsFrom": ["app_webhook_delivery_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "app_webhook_delivery_attempt_event_id_event_outbox_id_fk": {
          "name": "app_webhook_delivery_attempt_event_id_event_outbox_id_fk",
          "tableFrom": "app_webhook_delivery_attempt",
          "tableTo": "event_outbox",
          "schemaTo": "ecp_indexer_schema",
          "columnsFrom": ["event_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "ecp_indexer_schema.comment_classification_results": {
      "name": "comment_classification_results",
      "schema": "ecp_indexer_schema",
      "columns": {
        "comment_id": {
          "name": "comment_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "labels": {
          "name": "labels",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "score": {
          "name": "score",
          "type": "double precision",
          "primaryKey": false,
          "notNull": true
        },
        "comment_revision": {
          "name": "comment_revision",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "comment_classification_results_comment_id_comment_revision_pk": {
          "name": "comment_classification_results_comment_id_comment_revision_pk",
          "columns": ["comment_id", "comment_revision"]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "ecp_indexer_schema.comment_moderation_statuses": {
      "name": "comment_moderation_statuses",
      "schema": "ecp_indexer_schema",
      "columns": {
        "comment_id": {
          "name": "comment_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "moderation_status": {
          "name": "moderation_status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "updated_by": {
          "name": "updated_by",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'premoderation'"
        },
        "comment_revision": {
          "name": "comment_revision",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "comment_moderation_statuses_by_status_idx": {
          "name": "comment_moderation_statuses_by_status_idx",
          "columns": [
            {
              "expression": "moderation_status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "comment_moderation_statuses_comment_id_comment_revision_pk": {
          "name": "comment_moderation_statuses_comment_id_comment_revision_pk",
          "columns": ["comment_id", "comment_revision"]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "moderation_status_enum": {
          "name": "moderation_status_enum",
          "value": "\"ecp_indexer_schema\".\"comment_moderation_statuses\".\"moderation_status\" IN ('pending', 'approved', 'rejected')"
        }
      },
      "isRLSEnabled": false
    },
    "ecp_indexer_schema.comment_reference_resolution_results": {
      "name": "comment_reference_resolution_results",
      "schema": "ecp_indexer_schema",
      "columns": {
        "comment_id": {
          "name": "comment_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "references": {
          "name": "references",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "references_resolution_status": {
          "name": "references_resolution_status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "comment_revision": {
          "name": "comment_revision",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        }
      },
      "indexes": {
        "comment_reference_resolution_results_by_status_idx": {
          "name": "comment_reference_resolution_results_by_status_idx",
          "columns": [
            {
              "expression": "references_resolution_status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "comment_reference_resolution_results_comment_id_comment_revision_pk": {
          "name": "comment_reference_resolution_results_comment_id_comment_revision_pk",
          "columns": ["comment_id", "comment_revision"]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "comment_reference_resolution_status_enum": {
          "name": "comment_reference_resolution_status_enum",
          "value": "\"ecp_indexer_schema\".\"comment_reference_resolution_results\".\"references_resolution_status\" IN ('success', 'pending', 'partial', 'failed')"
        }
      },
      "isRLSEnabled": false
    },
    "ecp_indexer_schema.comment_reports": {
      "name": "comment_reports",
      "schema": "ecp_indexer_schema",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "comment_id": {
          "name": "comment_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "reportee": {
          "name": "reportee",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "message": {
          "name": "message",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        }
      },
      "indexes": {
        "comment_reports_by_status_idx": {
          "name": "comment_reports_by_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "comment_reports_by_created_at_idx": {
          "name": "comment_reports_by_created_at_idx",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "comment_report_status_enum": {
          "name": "comment_report_status_enum",
          "value": "\"ecp_indexer_schema\".\"comment_reports\".\"status\" IN ('pending', 'resolved', 'closed')"
        }
      },
      "isRLSEnabled": false
    },
    "ecp_indexer_schema.event_outbox": {
      "name": "event_outbox",
      "schema": "ecp_indexer_schema",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigserial",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "processed_at": {
          "name": "processed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "event_uid": {
          "name": "event_uid",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "event_type": {
          "name": "event_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "aggregate_type": {
          "name": "aggregate_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "aggregate_id": {
          "name": "aggregate_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "payload": {
          "name": "payload",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "payload_size": {
          "name": "payload_size",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        }
      },
      "indexes": {
        "event_outbox_by_processed_at_idx": {
          "name": "event_outbox_by_processed_at_idx",
          "columns": [
            {
              "expression": "processed_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "event_outbox_by_created_at_idx": {
          "name": "event_outbox_by_created_at_idx",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "event_outbox_eventUid_unique": {
          "name": "event_outbox_eventUid_unique",
          "nullsNotDistinct": false,
          "columns": ["event_uid"]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "ecp_indexer_schema.muted_accounts": {
      "name": "muted_accounts",
      "schema": "ecp_indexer_schema",
      "columns": {
        "account": {
          "name": "account",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "ecp_indexer_schema.user": {
      "name": "user",
      "schema": "ecp_indexer_schema",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'user'"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "ecp_indexer_schema.user_auth_credentials": {
      "name": "user_auth_credentials",
      "schema": "ecp_indexer_schema",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "last_used_at": {
          "name": "last_used_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "method": {
          "name": "method",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "identifier": {
          "name": "identifier",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "user_auth_credentials_user_id_user_id_fk": {
          "name": "user_auth_credentials_user_id_user_id_fk",
          "tableFrom": "user_auth_credentials",
          "tableTo": "user",
          "schemaTo": "ecp_indexer_schema",
          "columnsFrom": ["user_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "user_auth_credentials_by_method_and_identifier_uq": {
          "name": "user_auth_credentials_by_method_and_identifier_uq",
          "nullsNotDistinct": false,
          "columns": ["method", "identifier"]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "ecp_indexer_schema.user_auth_session": {
      "name": "user_auth_session",
      "schema": "ecp_indexer_schema",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "last_used_at": {
          "name": "last_used_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_auth_credentials_id": {
          "name": "user_auth_credentials_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "uass_by_user_id_idx": {
          "name": "uass_by_user_id_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "uass_by_last_used_idx": {
          "name": "uass_by_last_used_idx",
          "columns": [
            {
              "expression": "last_used_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_auth_session_user_id_user_id_fk": {
          "name": "user_auth_session_user_id_user_id_fk",
          "tableFrom": "user_auth_session",
          "tableTo": "user",
          "schemaTo": "ecp_indexer_schema",
          "columnsFrom": ["user_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "user_auth_session_user_auth_credentials_id_user_auth_credentials_id_fk": {
          "name": "user_auth_session_user_auth_credentials_id_user_auth_credentials_id_fk",
          "tableFrom": "user_auth_session",
          "tableTo": "user_auth_credentials",
          "schemaTo": "ecp_indexer_schema",
          "columnsFrom": ["user_auth_credentials_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "ecp_indexer_schema.user_auth_session_siwe_refresh_token": {
      "name": "user_auth_session_siwe_refresh_token",
      "schema": "ecp_indexer_schema",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "user_auth_session_id": {
          "name": "user_auth_session_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "uassrt_by_expires_at_idx": {
          "name": "uassrt_by_expires_at_idx",
          "columns": [
            {
              "expression": "expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_auth_session_siwe_refresh_token_user_auth_session_id_user_auth_session_id_fk": {
          "name": "user_auth_session_siwe_refresh_token_user_auth_session_id_user_auth_session_id_fk",
          "tableFrom": "user_auth_session_siwe_refresh_token",
          "tableTo": "user_auth_session",
          "schemaTo": "ecp_indexer_schema",
          "columnsFrom": ["user_auth_session_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {},
  "schemas": {
    "ecp_indexer_schema": "ecp_indexer_schema"
  },
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}
